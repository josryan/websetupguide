this.LIBRO=this.LIBRO||{},this.LIBRO.profile=function(o){"use strict";var e,r;function i(r){o.dom.getClosestWithClassName(r.target,e.CONTAINER_CLASS)||t()}function t(){o.dom.removeListener(document,"click",t),o.dom.removeClass(o.dom.getElements(".".concat(e.CONTAINER_CLASS)),e.ACTIVE_CLASS)}function n(r){var n,a=r.currentTarget,l=o.dom.getClosestParent(a,".".concat(e.CONTAINER_CLASS));o.dom.hasClass(l,e.ACTIVE_CLASS)?t():(n=l,o.dom.addClass(n,e.ACTIVE_CLASS),o.dom.addListener(document,"click",i),o.rapid.addRapid({profile__dropdown:"header"}))}function a(e){o.dom.applyFunction(".".concat(e),(function(o){o.id=e}))}return function(o){o.ACTIVE_CLASS="profile--is-active",o.GRAVATAR_CLASS="profile__gravatar",o.CONTAINER_CLASS="profile"}(e||(e={})),o.store.once("USER_DATA",(function(e){if(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];o.store.debug&&(e=o.logger.tag("profile")).info.apply(e,function(o,e,r){if(r||2===arguments.length)for(var i,t=0,n=e.length;t<n;t++)!i&&t in e||(i||(i=Array.prototype.slice.call(e,0,t)),i[t]=e[t]);return o.concat(i||Array.prototype.slice.call(e))}([],function(o,e){var r="function"==typeof Symbol&&o[Symbol.iterator];if(!r)return o;var i,t,n=r.call(o),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){t={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return a}(r),!1))}("Handling incoming user data: %s",e),e.isAuthenticated)o.dom.applyFunction(".profile .profile__alias",(function(r){r.innerText=e.user_loggedinalias,o.dom.hide(".profile .profile__sign__in"),o.dom.show(".profile .profile__gravatar"),o.dom.addListener(".profile .profile__gravatar","click",n)})),a("profile__dropdown");else{var r="profile";a(r),o.rapid.initializeViewabilityTracking("#".concat(r),"header")}})),r=o.store.getData().data,o.dom.setAttribute(".profile .profile__sign__in","href",r.user.logInUrl),void o.dom.setAttribute(".profile .profile__sign__out","href",r.user.logoutUrl)}(LIBRO.common);