this.LIBRO=this.LIBRO||{},this.LIBRO.footer=function(e){"use strict";function t(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e.store.debug&&(t=e.logger.tag("footer")).info.apply(t,function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return l}(r),!1))}function r(){t("Handling %s event","USER_DATA");try{e.rapid.initializeViewabilityTracking("#footer","footer"),e.rapid.initializeViewabilityTracking(".tpl-footer","footer")}catch(e){t(e)}}return e.store.once("PAGE_LOADED",r),e.store.once("PAGE_LOADED",(function(){var t=e.dom.getElement(".footer__disclaimer");if(e.dom.getClosestParent(t,".section")){var r=e.dom.getElement(t,".footer__container");if(e.dom.getClosestParent(t,".section").classList.contains("footer-collapsible")){var o=r.children.length;if(o>1){e.dom.addClass(r,"footer-collapsible--collapsed");var n=r.children[0],i=document.createElement("button");e.dom.addClass(i,"footer-collapsible__trigger"),i.setAttribute("id","footer-collapsible__trigger"),i.setAttribute("aria-controls","footer-collapsible__content"),i.setAttribute("aria-expanded","false"),i.innerHTML=n.innerHTML,i.insertAdjacentHTML("afterbegin",'<span class="footer-collapsible__icons"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20,11 L13,11 L13,4 C13,3.448 12.552,3 12,3 C11.4475,3 11,3.448 11,4 L11,11 L4,11 C3.448,11 3,11.448 3,12 C3,12.5525 3.448,13 4,13 L11,13 L11,20 C11,20.5525 11.4475,21 12,21 C12.552,21 13,20.5525 13,20 L13,13 L20,13 C20.552,13 21,12.5525 21,12 C21,11.448 20.552,11 20,11"></path></svg></span><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19.2728264,11 C19.6749534,11 20,11.447 20,12 C20,12.552 19.6749534,12.999 19.2728264,12.999 L4.72717357,12.999 C4.32504658,12.999 4,12.552 4,12 C4,11.447 4.32504658,11 4.72717357,11 L19.2728264,11 Z"></path></svg></span></span>'),n.replaceChildren(i);var l=document.createElement("div");l.className="footer-collapsible__content",l.setAttribute("id","footer-collapsible__content"),l.setAttribute("role","region"),l.setAttribute("aria-labelledby","footer-collapsible__trigger"),r.insertBefore(l,r.children[1]);for(var a=2;a<=o;a++)l.appendChild(r.children[2]);e.dom.addListener(".footer-collapsible__trigger","click",(function(t){t.preventDefault();var r=e.dom.getClosestParent(t.target,".footer__container");e.dom.toggleClass(r,"footer-collapsible--collapsed",!e.dom.hasClass(r,"footer-collapsible--collapsed"));var o=t.target.getAttribute("aria-expanded");t.target.setAttribute("aria-expanded","false"===o?"true":"false")}))}}}})),e.store.once("SAVINGS_PLAN_DATA",(function(r){t("Handling %s content: %s","SAVINGS_PLAN_DATA",r);try{"footer"in r.bmsm&&r.bmsm.footer.disclaimer&&e.dom.applyFunction(".footer .footer__disclaimer",(function(e){e.innerHTML=r.bmsm.footer.disclaimer}))}catch(e){t(e)}})),void e.store.once("USER_DATA",(function(o){t("Handling incoming user data: %s",o);try{if(o.privacyLinks){var n=function(r,o){return r.warningMsg.length>0&&t("Privacy links warning: %s",r.warningMsg),r.footerSequence.map((function(e){if(e in r.links)return!0===r.links[e].multiurl?{urls:r.links[e].urls,label:r.links[e].label}:{url:r.links[e].url,label:r.links[e].label,iconUrl:!0===r.links[e].showControlIcon||!0===r.links[e].showPrivacyControlIcon?r.links[e].icon?r.links[e].icon:o:""};t("Privacy links error: item in footerSequence has no match in privacyLinks")})).filter((function(e){return!!e})).map((function(t){if(t.urls)for(var r in t.linkHtml=t.label,t.urls)if(e.dataUtils.hasProperty(t.urls,r)){var o=new RegExp("\\${"+r+"}(.+?)\\${end_link}");t.linkHtml=t.linkHtml.replace(o,'<a href="'+t.urls[r]+'" class="footer__link" target="_blank">$1</a>')}return t})).filter((function(e){return e.label&&!/terms_link|privacy_link/.test(e.label)}))}(o.privacyLinks,o.privacyIconUrl),i=e.dom.getElements(".footer__list__item.footer__list__item__ccpa");t(JSON.stringify(n)),n.length>0&&i.length>0&&(n.forEach((function(e){var t=document.createElement("li"),r=e.iconUrl?'<div class="footer__privacy-icon"><img class="footer__privacy-icon__img" src = "'.concat(e.iconUrl,'" alt="ccpa icon"/></img></div>'):"";t.className="footer__list__item",t.innerHTML='<a href="'.concat(e.url,'" class="footer__link" target="_blank">').concat(e.label).concat(r,"</a>"),i[0].parentNode.insertBefore(t,i[0])})),i.forEach((function(e){return e.parentNode.removeChild(e)})))}r()}catch(e){t(e)}}))}(LIBRO.common);