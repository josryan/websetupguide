this.LIBRO=this.LIBRO||{},this.LIBRO.heroCover=function(t){"use strict";var e;!function(t){t.DEV="dev",t.QA="qa",t.QA5="qa5",t.STAGE="stage",t.PROD="prod"}(e||(e={}));var o={"theme-a":"button--dory button--large","theme-a-bold":"button--dory button--large button--bold","theme-aa":"button--dory button--large button--large--wide","theme-aa-bold":"button--dory button--large button--large--wide button--bold","theme-b":"button--text-color--dory button--large","theme-c":"button--outline--dory button--outline button--large","theme-d":"button--dory button--small","theme-e":"button--outline--dory button--outline","theme-f":"button--watermelon button--large","theme-g":"button--outline button--outline--charcoal--transparent button--large","theme-h":"button--outline button--outline--white--transparent button--large","theme-i":"button--danteinferno button--large","theme-j":"button--swedishfish button--large","theme-k":"button--danteinferno--yellow button--large","theme-l":"button--swedishfish--yellow button--large","theme-m":"button--outline button--outline--white--transparent--yellow button--large","theme-n":"button--smurfette button--large","theme-o":"button--outline button--outline--smurfette button--large","theme-p":"button--barney button--large","theme-q":"button--danteinferno--blue button--large","theme-r":"button--outline button--outline--white--transparent--blue button--large","theme-s":"button--masala--dark button--large","theme-t":"button--turmeric button--large","theme-u":"button--store--btn"};function n(){for(var e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];t.store.debug&&(e=t.logger.tag("hero-cover")).info.apply(e,function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}([],function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return c}(o),!1))}function r(e,o){void 0!==o&&(""!==o?e.innerHTML=o:t.dom.hide(e))}function i(e,o){t.dom.applyFunction("".concat(e," .hero-cover__title"),(function(t){return r(t,o.title)})),t.dom.applyFunction("".concat(e," .hero-cover__desc"),(function(t){return r(t,o.desc)})),t.dom.applyFunction("".concat(e," .hero-cover__disclaimer"),(function(t){return r(t,o.disclaimer)})),t.dom.applyFunction("".concat(e," .hero-cover__callout"),(function(t){return r(t,o.callout)})),t.dom.applyFunction("".concat(e," .hero-cover__price"),(function(t){return r(t,o.price)})),t.dom.applyFunction("".concat(e," .hero-cover__preface"),(function(t){return r(t,o.preface)}))}function c(e){var r=e.find((function(t){return void 0===t._id})),c=e.filter((function(t){return void 0!==t._id})),u=e.some((function(t){return t.cta_action&&"switch"===t.cta_action}));r&&(i(".hero-cover",r),t.updateGenericButton(".hero-cover",r)),c.length>0&&c.forEach((function(e){i('.hero-cover[data-id="'.concat(e._id,'"]'),e),t.updateGenericButton('.hero-cover[data-id="'.concat(e._id,'"]'),e),function(e,r){try{t.dom.applyFunction("".concat(e,' .hero-cover__picture source[media*="max-width: 767px"]'),(function(t){t.getAttribute("srcset")&&r.img&&r.img2x&&""!==r.img&&""!==r.img2x?t.setAttribute("srcset",r.img+", "+r.img2x):t.remove()})),t.dom.applyFunction("".concat(e,' .hero-cover__picture source[media*="min-width: 768px"]'),(function(t){t.getAttribute("srcset")&&r.img_medium&&r.img_medium2x&&""!==r.img_medium&&""!==r.img_medium2x?t.setAttribute("srcset",r.img_medium+", "+r.img_medium2x):t.remove()})),t.dom.applyFunction("".concat(e,' .hero-cover__picture source[media*="min-width: 1024px"]'),(function(t){t.getAttribute("srcset")&&r.img_large&&r.img_large2x&&""!==r.img_large&&""!==r.img_large2x?t.setAttribute("srcset",r.img_large+", "+r.img_large2x):t.remove()})),t.dom.applyFunction("".concat(e," .hero-cover__picture__img"),(function(t){t.getAttribute("src")&&r.img&&""!==r.img?(t.setAttribute("src",r.img),t.getAttribute("alt")&&r.img_alt_txt&&""!==r.img_alt_txt?t.setAttribute("alt",r.img_alt_txt):t.removeAttribute("alt")):t.remove()})),t.dom.applyFunction("".concat(e," .hero-cover__logo"),(function(t){t.getAttribute("src")&&r.logo&&""!==r.logo?(t.setAttribute("src",r.logo),t.getAttribute("alt")&&r.logo_alt_txt&&""!==r.logo_alt_txt?t.setAttribute("alt",r.logo_alt_txt):t.removeAttribute("alt")):t.remove()})),t.dom.applyFunction("".concat(e," .button"),(function(t){t.getAttribute("class")&&r.btn_theme&&o[r.btn_theme]?t.setAttribute("class","button "+o[r.btn_theme]):t.setAttribute("class","button")})),t.dom.applyFunction("".concat(e),(function(t){t.getAttribute("class")&&r.theme?t.setAttribute("class","hero-cover hero-cover--"+r.theme):t.setAttribute("class","hero-cover")}))}catch(t){n(t)}}('.hero-cover[data-id="'.concat(e._id,'"]'),e)})),u&&t.dom.addListener(".hero-cover","click",(function(e){t.dom.isInside(e.target,'.button[data-action="switch"]')&&(e.preventDefault(),t.store.showSwitchLightbox())}))}return t.store.once("PAGE_LOADED",(function(){n("Handling %s event","PAGE_LOADED");try{t.dom.applyFunction(".hero-cover",(function(e){var o=e.parentElement.id;t.dom.applyFunction("#".concat(o),(function(e){t.rapid.addRapid(e.id,!0)}))}))}catch(t){n(t)}})),t.store.once("URL_DATA",(function(e){n("Handling %s content: %s","URL_DATA",e);try{t.dom.appendQueryParams(".hero-cover .button","href",e)}catch(t){n(t)}})),t.store.once("SUBSCRIPTION_CONTENT",(function(t){n("Handling %s content: %s","SUBSCRIPTION_CONTENT",t);try{"hero-cover"in t&&c(t["hero-cover"])}catch(t){n(t)}})),t.store.once("PAGE_LOADED",(function(){if(n("Handling %s event","PAGE_LOADED"),t.dom.getElements(".hero-cover .button--store--btn img").length>1){var e=function(){try{var t=navigator.userAgent||navigator.vendor;return/android/i.test(t)?"Android":/iPad|iPhone/.test(t)?"IOS":"unknown"}catch(t){throw new TypeError(t)}}(),o=t.dom.getElement('.hero-cover .button--store--btn img[src*="app-store"]'),r=t.dom.getElement('.hero-cover .button--store--btn img[src*="play-store"]');o&&r&&("IOS"===e&&t.dom.getParentElement(r).remove(),"Android"===e&&t.dom.getParentElement(o).remove())}})),void t.store.once("PAGE_LOADED",(function(){if(n("Handling %s event","PAGE_LOADED"),function(){try{var t=navigator.userAgent||navigator.vendor;return!!/window/i.test(t)}catch(t){throw new TypeError(t)}}())try{var t=window.LIBRO.content.attributes;if(!t)return;var e=JSON.parse(t.multi_xmas_sections);if(Array.isArray(e)&&e.length>0){var o=e[0].hero_covers;if(o){var r=JSON.parse(o).find((function(t){return"windows"===t.type}));r&&r.hero_cover_content&&c(JSON.parse(r.hero_cover_content))}}}catch(t){n(t)}}))}(LIBRO.common);