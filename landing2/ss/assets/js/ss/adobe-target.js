this.LIBRO=this.LIBRO||{},this.LIBRO.adobeTarget=function(t){"use strict";var n=function(){return(n=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};function e(t,n,e,o){return new(e||(e=Promise))((function(r,i){function a(t){try{u(o.next(t))}catch(t){i(t)}}function c(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((o=o.apply(t,n||[])).next())}))}function o(t,n){var e,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],o=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function r(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,r,i=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}return a}function i(t,n,e){if(e||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return t.concat(o||Array.prototype.slice.call(n))}var a,c=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=[t[1],[]];t.length>2&&(/%(d|s|o|f)/g.test(String(t[1]))?(e[0]=t[1],e[1]=t.slice(2)):(e[0]="[".concat(t[1],"] ").concat(t[2]),e[1]=t.slice(3))),console[t[0]].apply(null,i([e[0]],r(e[1]),!1))},u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=function(t){return t&&t.stack&&t.message}(t[0])?t[0]:new Error(String(t[0])),r="string"==typeof t[1]?{description:t[1]}:n({},t[1]);try{"newrelic"in window&&window.newrelic.noticeError(o,r)}catch(t){}},l=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return c.apply(void 0,i(["info"],r(t),!1))},s=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return u.apply(void 0,i([],r(t),!1))},d=Object.freeze({__proto__:null,info:l,nr:s,tag:function(t){return{info:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return c.apply(void 0,i(["info",t],r(n),!1))}}}});!function(t){t.LIBRO_CONFIG_OBJECT="window.LIBRO.config",t.MBOX_NAME="ps_empty",t.MBOX_SELECTOR="#mbox_global",t[t.DYNAMIC_DATA_TIMEOUT=2e3]="DYNAMIC_DATA_TIMEOUT"}(a||(a={}));var f={debug:!1,dynamicDataTimeout:null,userDataTimeout:null,dynamicData:["SUBSCRIPTION_CONTENT","SAVINGS_PLAN_DATA"],hasShownHiddenContent:!1,atjsLoaderScriptUrl:"https://s.aolcdn.com/membership/WAS/tandt/atjs-loader/atjs-loader.2.1.0.js"};function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];f.debug&&l.apply(d,i(["adobe-target"],r(t),!1))}function p(){h("Stop listening for dynamic data"),t.store.off("SUBSCRIPTION_CONTENT",A),t.store.off("SAVINGS_PLAN_DATA",O),window.clearTimeout(f.dynamicDataTimeout)}function m(){if(!f.hasShownHiddenContent){h("Showing hidden page content"),f.hasShownHiddenContent=!0,t.dom.removeClass(Array.prototype.slice.call(document.querySelectorAll(".tandt-is-hidden")),"tandt-is-hidden");var n=t.dom.getElement(".loading-dots");t.dom.addClass(n,"loading-dots--hidden")}}function T(t){if(t.length>0){var n=t[0];window.LIBRO.atjsLoader.applyOffer({mbox:a.MBOX_NAME,selector:a.MBOX_SELECTOR,offer:t}),"redirect"!==n.action&&m()}else h("There are no offers to show"),m()}function g(t,n){m(),h("Error %s, %s",t,n)}function w(e){void 0===e&&(e={});var o=t.store.getData(),r=o.data,i=o.config;return n({status:r.user.isAuthenticated?"authorized":"unauthorized",sku:i.product.sku,ncid:i.ncid,"profile.bmsmAmount":"".concat(100*r.savingsPlan.promo.bmsm.amount,"%"),"profile.subscriptionCategory":r.subscription.subscriptionCategory,"profile.tastemaker":""},e)}function y(){return e(this,void 0,void 0,(function(){return o(this,(function(n){try{!function(){if(!t.dom.getElement(a.MBOX_SELECTOR)){h("mbox element does not exist on the page, will create");var n=document.createElement("div");n.setAttribute("id",a.MBOX_SELECTOR.replace("#","")),document.body.prepend(n)}}(),h("Getting T&T offer.."),window.LIBRO.atjsLoader.getOffer({mbox:a.MBOX_NAME,params:w(),success:T,error:g})}catch(t){console.log("err",t),m(),h(t)}return[2]}))}))}function A(){_("SUBSCRIPTION_CONTENT")}function O(){_("SAVINGS_PLAN_DATA")}function v(n){return e(this,void 0,void 0,(function(){var e;return o(this,(function(o){switch(o.label){case 0:if(h("Handling incoming dataset: %s","USER_DATA"),window.clearTimeout(f.userDataTimeout),!0!==n.allow_tandt)return m(),h("Will not show offer, allow_tandt !== true"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,new Promise((function(n,e){t.dom.loadScript(f.atjsLoaderScriptUrl,"window.LIBRO.atjsLoader").then((function(){window.LIBRO.atjsLoader.done((function(t){t?e(t):n(!0)}))})).catch((function(t){e(t)}))}))];case 2:return o.sent(),[3,4];case 3:return e=o.sent(),m(),h("Error loading atjsLoader %s",e),s(e,"Error loading atjsLoader"),[2];case 4:return n.isAuthenticated?(t.store.once("SUBSCRIPTION_CONTENT",A),t.store.once("SAVINGS_PLAN_DATA",O),f.dynamicDataTimeout=window.setTimeout((function(){p(),y();var t="Could not get additional dynamic data in time, waited ".concat(a.DYNAMIC_DATA_TIMEOUT);h(t),s(t)}),a.DYNAMIC_DATA_TIMEOUT),[2]):(h("Will show offer for unauthenticated user, allow_tandt = true"),y(),[2])}}))}))}function _(t){h("Tracking incoming dataset: %s",t),f.dynamicData=f.dynamicData.filter((function(n){return n!==t})),0===f.dynamicData.length&&(h("All dynamic data has arrived"),p(),y())}return function(){return e(this,void 0,void 0,(function(){return o(this,(function(n){return t.dom.isWindowObject(a.LIBRO_CONFIG_OBJECT)&&window.LIBRO.config.debug&&(f.debug=!0),t.store.once("USER_DATA",v),f.userDataTimeout=window.setTimeout((function(){m(),h("Could not get user data in time, waited %sms",a.DYNAMIC_DATA_TIMEOUT)}),a.DYNAMIC_DATA_TIMEOUT),[2]}))}))}()}(LIBRO.common);