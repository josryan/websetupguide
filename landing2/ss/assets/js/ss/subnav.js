this.LIBRO=this.LIBRO||{},this.LIBRO.subnav=function(t){"use strict";function e(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var a,o,r=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(a=r.next()).done;)c.push(a.value)}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return c}function n(n){for(var a,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];t.store.debug&&(a=t.logger.tag(n)).info.apply(a,function(t,e,n){if(n||2===arguments.length)for(var a,o=0,r=e.length;o<r;o++)!a&&o in e||(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return t.concat(a||Array.prototype.slice.call(e))}([],e(o),!1))}"function"==typeof SuppressedError&&SuppressedError;var a,o,r=function(e,n,a){t.dom.applyFunction("#".concat(e," .").concat(n),(function(e){t.dom.getElement(e,a).setAttribute("aria-expanded","false")}))},c=function(n,a){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var c=e(o,4),i=c[0],l=c[1],d=c[2],s=c[3],u=t.dom.getElements(n,"".concat(l,", ").concat(d,", ").concat(s)),E="".concat(i).concat(a+1,"__");u.forEach((function(t){if(t.id="".concat(E).concat(t.id),t.id.includes("header")){var e=t.getAttribute("aria-controls");t.setAttribute("aria-controls","".concat(E).concat(e))}else if(t.id.includes("panel")){var n=t.getAttribute("aria-labelledby");t.setAttribute("aria-labelledby","".concat(E).concat(n))}}))},i={CONTAINER:".subnav",PREFIX:"subnav",ITEM:".subnav__nav",CONTENT:".subnav__nav__links",TRIGGER:".subnav__nav--actionItem",TOGGLE:"subnav--collapsed"};t.store.on("TOGGLE_HAMBURGER",(function(e){t.logger.log("".concat(e," hamburger")),"CLOSE"===e&&t.dom.toggleClass(t.dom.getElement(i.ITEM),i.TOGGLE,!0)})),a=i,void 0===o&&(o=!1),t.dom.applyFunction(a.CONTAINER,(function(e,i){var l="".concat(a.PREFIX).concat(i+1),d=t.dom.getElements(e,a.ITEM);if(e.id=l,c(e,i,a.PREFIX,a.ITEM,a.TRIGGER,a.CONTENT),t.dom.addClass(d,a.TOGGLE),d.length>0&&o){var s,u,E,f=d[0];t.dom.removeClass(f,a.TOGGLE),t.dom.getElement(f,a.TRIGGER).setAttribute("aria-expanded","true"),t.store.once("PAGE_LOADED",(s=a.CONTAINER,u=a.ITEM,E=a.PREFIX,function(){n(E,"Handling %s event","PAGE_LOADED");try{t.dom.applyFunction(s,(function(e){var n,a=t.dom.getElements(e,u)[0];t.rapid.addRapid(((n={})[a.id]=E,n))}))}catch(t){n(t)}}))}r(l,a.TOGGLE,a.TRIGGER)})),t.dom.addListener(a.TRIGGER,"click",(function(e){e.preventDefault();var n=e.currentTarget,o=t.dom.getClosestParent(n,a.ITEM),c=t.dom.getClosestParent(n,a.CONTAINER).id;t.dom.toggleClass(o,a.TOGGLE,!t.dom.hasClass(o,a.TOGGLE));var i=n.getAttribute("aria-expanded");n.setAttribute("aria-expanded","false"===i?"true":"false"),t.dom.applyFunction("#".concat(c," ").concat(a.ITEM),(function(e){e.id!==o.id&&t.dom.addClass(e,a.TOGGLE)})),r(c,a.TOGGLE,a.TRIGGER)}))}(LIBRO.common);