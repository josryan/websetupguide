this.LIBRO=this.LIBRO||{},this.LIBRO.navbar=function(e){"use strict";var a;!function(e){e.DEV="dev",e.QA="qa",e.QA5="qa5",e.STAGE="stage",e.PROD="prod"}(a||(a={}));var n,r,t,o=function(e,a){try{for(var n=e.split("/").filter(Boolean),r=a.split("/").filter(Boolean),t=Math.min(n.length,r.length),o=[],d=0;d<t&&n[d]===r[d];d++)o.push(n[d]);var i=o.join("/");return i?"/"+i:""}catch(e){return""}};function d(){for(var a,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.store.debug&&(a=e.logger.tag("header")).info.apply(a,function(e,a,n){if(n||2===arguments.length)for(var r,t=0,o=a.length;t<o;t++)!r&&t in a||(r||(r=Array.prototype.slice.call(a,0,t)),r[t]=a[t]);return e.concat(r||Array.prototype.slice.call(a))}([],function(e,a){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,t,o=n.call(e),d=[];try{for(;(void 0===a||a-- >0)&&!(r=o.next()).done;)d.push(r.value)}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return d}(n),!1))}function i(a,n){var r;void 0===n&&(n=""),"rapidTracked"in a.dataset||(n&&(a.id=n),a.dataset.rapidTracked="",e.rapid.addRapid(((r={})[a.id]="header",r)))}function c(a){var n=a.className,r=void 0===n?"":n,t=a.id,o=void 0===t?"":t;r?e.dom.applyFunction(".".concat(r),(function(e){i(e,r)})):e.dom.applyFunction("#".concat(o),(function(e){i(e)}))}function s(a){if("click"==a.type||32==a.keyCode||13==a.keyCode){var n=e.dom.hasClass(e.dom.getElement("header.header"),"header--open")?"OPEN":"CLOSE";e.store.emit("TOGGLE_HAMBURGER",n)}}return function(e){e.DESKTOP_BREAKPOINT="(min-width: 870px)"}(n||(n={})),r="header--open",t=e.dom.getElement("header.header"),e.store.on("MEDIA_QUERY_LIST_EVENT",(function(e){d("Handling %s content: %s","MEDIA_QUERY_LIST_EVENT",e);try{var a=e.matches;e.media===n.DESKTOP_BREAKPOINT&&(a?(c({id:"header__brand"}),c({className:"header__nav"}),c({className:"header--hide-small"})):c({id:"header__brand"}))}catch(e){d(e)}})),e.store.once("URL_DATA",(function(a){!function(a){d("Handling %s content: %s","URL_DATA",a);try{e.dom.appendQueryParams(".header .button","href",a),e.dom.appendQueryParams(".header__nav__a","href",a),e.dom.appendQueryParams(".header__brand a","href",a),e.dom.appendQueryParams(".subnav__nav__links__link","href",a)}catch(e){d(e)}}(a),function(a){d("Handling %s content: %s","URL_DATA",a);for(var n=new URL(a.url).pathname,r=e.dom.getElements(".header__nav__a"),t=void 0,i="",c=0;c<r.length;c++){var s=r[c];if(!s.href.includes("#")){var l=new URL(s.href).pathname;if("/"!==l){if(n===l){t=c;break}var h=o(n,l);h.length>i.length&&(i=h,t=c)}}}if(null!=t){var _=e.dom.getElements(".header__nav__a--is-current");_&&(console.log(_),e.dom.removeClass(_,"header__nav__a--is-current")),e.dom.addClass(r[t],"header__nav__a--is-current")}}(a)})),e.store.once("SUBSCRIPTION_CONTENT",(function(a){d("Handling %s content: %s","SUBSCRIPTION_CONTENT",a);try{"cta_label"in a.header&&e.updateGenericButton(".header",a.header),"cta_action"in a.header&&e.dom.addListener(".header","click",(function(a){e.dom.isInside(a.target,'.button[data-action="switch"]')&&(a.preventDefault(),e.store.showSwitchLightbox())}))}catch(e){d(e)}})),e.dom.addListener(".header__nav-trigger","click",(function(a){e.dom.toggleClass(t,r,!e.dom.hasClass(t,r)),window.scroll({top:0}),c("header__nav")})),e.dom.addListener(".header__nav","click",(function(a){e.dom.isInside(a.target,"a")&&e.dom.toggleClass(t,r,!1)})),void e.dom.addListener(".header__nav-trigger",["click",s],["keypress",s])}(LIBRO.common);